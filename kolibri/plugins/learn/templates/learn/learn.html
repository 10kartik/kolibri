{% extends "kolibri/base.html" %}
{% load learn_tags %}
{% load kolibri_tags %}

{% block content %}
{% kolibri_bootstrap_collection 'channel' 'ChannelResource' %}
  <script>
    {{kolibri}}.resources.ContentNodeResource.setChannel("{{ request.COOKIES.currentChannel }}");
    var root_node = JSON.parse("{{ rootnode|escapejs }}");
    var model = {{kolibri}}.resources.ContentNodeResource.createModel(root_node);
    model.synced = true;
  </script>
  {% kolibri_bootstrap_collection 'contentnode' 'ContentNodeResource' parent=rootnode_pk kwargs_channel_id=request.COOKIES.currentChannel %}
  {% kolibri_bootstrap_collection 'contentnode' 'ContentNodeResource' popular=user.id channel=request.COOKIES.currentChannel kwargs_channel_id=request.COOKIES.currentChannel %}
  {% kolibri_bootstrap_collection 'contentnode' 'ContentNodeResource' resume=user.id channel=request.COOKIES.currentChannel kwargs_channel_id=request.COOKIES.currentChannel %}
  {% kolibri_bootstrap_collection 'contentnode' 'ContentNodeResource' next_steps=user.id channel=request.COOKIES.currentChannel kwargs_channel_id=request.COOKIES.currentChannel %}
  {% learn_async_assets %}
  {% learn_assets %}
{% endblock %}
